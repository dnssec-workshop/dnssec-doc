/etc/ssh/sshd_config:
UseDNS no
PermitRootLogin yes

/etc/systemd/logind.conf:
HandleLidSwitch=ignore
HandleLidSwitchDocked=ignore

apt-get purge exim4 rpcbind portmap at avahi-daemon

apt-get install dnsutils nmap tcpdump traceroute chkconfig curl git less screen bsd-mailx vim ntp ntpdate
apt-get autoremove
apt-get clean

apt-get install apt-transport-https ca-certificates
apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D
echo "deb https://apt.dockerproject.org/repo debian-stretch main" > /etc/apt/sources.list.d/docker.list
apt-get update
apt-cache policy docker-engine
apt-get install docker-engine
systemctl enable docker

apt-get install bridge-utils

/etc/network/interfaces:
=========
auto lo br0

allow-hotplug enp0s25
iface enp0s25 inet manual

iface br0 inet static
        bridge_ports enp0s25
        bridge_stp off       # disable Spanning Tree Protocol
        bridge_waitport 0    # no delay before a port becomes available
        bridge_fd 0

        address 10.20.0.X
        netmask 255.255.0.0
        network 10.20.0.0
        broadcast 10.20.255.255
        gateway 10.20.0.1
        dns-nameservers 10.20.8.1
=========


cd /root
git clone https://github.com/pecharmin/dnssec-workshop.git

cd /root/dnssec-workshop/docker/dnssec-bind
mkdir shared dnssec-attendee

cat <<EOF >>/etc/fstab

/root/dnssec-workshop/shared /root/dnssec-workshop/docker/dnssec-bind/shared none bind 0 0
/root/dnssec-workshop/dnssec-attendee /root/dnssec-workshop/docker/dnssec-bind/dnssec-attendee none bind 0 0
EOF

mount -a

docker build -t dnssec-bind .


/etc/default/docker:
DOCKER_OPTS="--log-level=info --iptables=false --ip-forward=true -b=br0 --fixed-cidr=10.20<NETID>.1/24"


/etc/systemd/system/docker.service:
[Service]
EnvironmentFile=-/etc/default/docker
ExecStart=/usr/bin/docker daemon -p /run/docker.pid $DOCKER_OPTS


/etc/rc.local:
/sbin/ip add del 172.17.46.0/16 dev br0
/etc/init.d/docker restart


~/.bashrc
=========

alias d=docker

ds() {
	CID=ns$1
	docker run --detach --net=bridge --dns=127.0.0.1 --hostname=$CID --name=$CID dnssec-bind || echo $CID failed
	echo -n "$CID: " ; docker inspect $(docker ps | grep $CID | cut -d' ' -f1) | grep '"IPAddress' | awk '{print $2}' | tr -d [\",] | uniq
}

dl() {
	docker ps -a | grep -v CONTAINER | awk '{print $1,$NF}' | while read cid name ; do echo -n "$name: " ; docker inspect $cid | grep '"IPAddress' | awk '{print $2}' | tr -d [\",] | uniq ; done | sort
}
=========
